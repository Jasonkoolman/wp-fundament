"use strict";function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}!function(a,t,e){var i,n,r;a(".woocommerce").on("click",".qty-btn",function(t){var e=a(this),i=e.siblings("input"),n=i.val(),r=e.hasClass("qty-down")?"Down":"Up";i[0]["step"+r](),n!==i.val()&&i.trigger("change"),t.preventDefault()}),a(".accordion-title").click(function(){var t=a(this),e=t.parent(".accordion-item"),i=t.next(".accordion-content");e.toggleClass("active"),i.slideToggle(300)}),a(e.body).hasClass("template-template-home")&&(i=a(t),n=a(".site-header"),r=!1,a(e.documentElement).addClass("sh"),i.scroll(function(t){var e=i.scrollTop();!r&&900<e?(r=!0,n.addClass("sticky")):r&&e<28&&(r=!1,n.removeClass("sticky"))}),ScrollReveal().reveal(".app-hero .col:first-child > *",{delay:400,duration:1400,scale:.8,opacity:0,interval:200,cleanup:!0}),ScrollReveal().reveal(".app-hero .col img",{duration:1400,origin:"right",distance:"100px",easing:"cubic-bezier(0.4, 0.2, 0.2, 1)",opacity:0,cleanup:!0}),ScrollReveal().reveal(".home-feature",{duration:1400,distance:"80px",opacity:0,interval:200,viewFactor:.5,cleanup:!0}),ScrollReveal().reveal(".box-img",{duration:1400,distance:"100px",origin:"right",opacity:0,interval:200,viewFactor:.5,cleanup:!0}))}(jQuery,window,document);var Point=function(){function i(t,e){_classCallCheck(this,i),this.x=t,this.y=e}return _createClass(i,[{key:"toString",value:function(){return"".concat(this.x,",").concat(this.y)}}]),i}();Point.mid=function(t,e){return new Point((t.x+e.x)/2,(t.y+e.y)/2)};var Hex=function t(e,i){_classCallCheck(this,t),this.q=e,this.r=i,this.s=-e-i};Hex.Directions=[new Hex(1,-1),new Hex(1,0),new Hex(0,1),new Hex(-1,1),new Hex(-1,0),new Hex(0,-1)],Hex.add=function(t,e){return new Hex(t.q+e.q,t.r+e.r)},Hex.neighbor=function(t,e){var i=Hex.Directions[e];return this.add(t,i)},Hex.round=function(t){var e=Math.round(t.q),i=Math.round(t.r),n=Math.round(t.s),r=Math.abs(e-t.q),a=Math.abs(i-t.r),s=Math.abs(n-t.s);return a<r&&s<r?e=-i-n:s<a&&(i=-e-n),new Hex(e,i)};var Orientation=function t(e,i,n,r,a,s,o,l,h){_classCallCheck(this,t),this.f0=e,this.f1=i,this.f2=n,this.f3=r,this.b0=a,this.b1=s,this.b2=o,this.b3=l,this.start_angle=h};Orientation.pointy=new Orientation(Math.sqrt(3),Math.sqrt(3)/2,0,1.5,Math.sqrt(3)/3,-1/3,0,2/3,.5),Orientation.flat=new Orientation(1.5,0,Math.sqrt(3)/2,Math.sqrt(3),2/3,0,-1/3,Math.sqrt(3)/3,0);var Grid=function(){function n(t,e,i){_classCallCheck(this,n),this.svg=t,this.tiles=[],this.size=i,this.viewport={x1:0,y1:0,x2:e,y2:e},this.width=e,this.origin=new Point(this.width/2,this.width/2),this.orientation=Orientation.pointy}return _createClass(n,[{key:"addTile",value:function(t){var e;Array.isArray(t)?(e=this.tiles).push.apply(e,_toConsumableArray(t)):this.tiles.push(t)}},{key:"removeTile",value:function(e){var t=this.tiles.findIndex(function(t){return t.hex.q===e.q&&t.hex.r===e.r});t&&this.tiles.splice(t,1)}},{key:"draw",value:function(){var e=this;this.svg.setAttribute("width",this.width),this.svg.setAttribute("viewBox","".concat(this.viewport.x1," ").concat(this.viewport.y1," ").concat(this.viewport.x2," ").concat(this.viewport.y2)),this.tiles.forEach(function(t){t.draw(),t.fill("#222"),e.drawNeighbors(t)})}},{key:"touch",value:function(){var t=this.getBoundaries(),e=this.getTileSize();this.viewport={x1:t.minX-e.width/2,y1:t.minY-e.height/2,x2:t.maxX+e.width/2,y2:t.maxY+e.height/2};var i=Math.abs(this.viewport.x1)+this.viewport.x2,n=Math.abs(this.viewport.y1)+this.viewport.y2,r="".concat(this.viewport.x1," ").concat(this.viewport.y1," ").concat(i," ").concat(n);this.svg.setAttribute("width",i),this.svg.setAttribute("viewBox",r)}},{key:"drawNeighbors",value:function(t){for(var e=0;e<6;e++){var i=Hex.neighbor(t.hex,e);if(!this.hasTile(i)){var n=new Tile(i,this);n.draw(),this.addTile(n)}}}},{key:"hasTile",value:function(e){return this.tiles.some(function(t){return t.hex.q===e.q&&t.hex.r===e.r})}},{key:"hexToPixel",value:function(t){var e=this.orientation,i=this.size,n=this.origin,r=(e.f0*t.q+e.f1*t.r)*i.x,a=(e.f2*t.q+e.f3*t.r)*i.y;return new Point(r+n.x,a+n.y)}},{key:"pixelToHex",value:function(t){var e=this.orientation,i=this.size,n=this.origin,r=new Point((t.x-n.x)/i.x,(t.y-n.y)/i.y),a=e.b0*r.x+e.b1*r.y,s=e.b2*r.x+e.b3*r.y;return new Hex(a,s)}},{key:"hexCornerOffset",value:function(t){var e=this.orientation,i=this.size,n=2*Math.PI*(e.start_angle-t)/6,r=i.x*Math.cos(n),a=i.y*Math.sin(n);return new Point(r,a)}},{key:"hexCorners",value:function(t){for(var e=[],i=this.hexToPixel(t),n=0;n<6;n++){var r=this.hexCornerOffset(n),a=new Point(i.x+r.x,i.y+r.y);e.push(a)}return e}},{key:"update",value:function(){this.tiles.forEach(function(t){return t.update()})}},{key:"updateWidth",value:function(t){var e=this.getCanvasWidth(),i=this.getCanvasHeight();if(this.viewport={x1:0,y1:0,x2:e,y2:i},null===this.origin)this.origin=new Point(e/2,i/2);else{var n=t.x-this.origin.x,r=t.y-this.origin.y;console.log(n,r),this.viewport=n<0?{x1:n,y1:r,x2:this.viewport.x2,y2:this.viewport.y2}:{x1:this.viewport.x1,y1:this.viewport.y1,x2:this.viewport.x2,y2:this.viewport.y2},console.log(this.origin)}this.width=e,this.height=i,this.svg.setAttribute("width",this.width),this.svg.setAttribute("viewBox","".concat(this.viewport.x1," ").concat(this.viewport.y1," ").concat(this.viewport.x2," ").concat(this.viewport.y2)),this.update()}},{key:"getBoundaries",value:function(){var i=0,n=0,r=0,a=0;return this.tiles.forEach(function(t){var e=t.center;e&&(e.x<=i?i=e.x:e.x>r&&(r=e.x),e.y<=n?n=e.y:e.y>a&&(a=e.y))}),{minX:i,minY:n,maxX:r,maxY:a}}},{key:"getCanvasWidth",value:function(){for(var t=this.getTileSize(),e=this.getHexMin("q"),i=this.getHexMax("q"),n=t.width,r=0,a=e;a<=i;a++)r+=n;return r}},{key:"getCanvasHeight",value:function(){for(var t=this.getTileSize(),e=this.getHexMin("r"),i=this.getHexMax("r"),n=t.height,r=0,a=e;a<=i;a++)r+=n;return r}},{key:"getHexMin",value:function(i,t){var e=1<arguments.length&&void 0!==t?t:0;return this.tiles.reduce(function(t,e){return e.hex[i]<t?e.hex[i]:t},e)}},{key:"getHexMax",value:function(i,t){var e=1<arguments.length&&void 0!==t?t:0;return this.tiles.reduce(function(t,e){return e.hex[i]>t?e.hex[i]:t},e)}},{key:"getTileSize",value:function(){var t,e;return t=2*(this.orientation===Orientation.flat?this.size.x:this.size.y),{width:e=Math.sqrt(3)/2*t,height:t,v:.75*t,h:e}}}]),n}(),rootElement=document.getElementById("designer"),svgRootElement=rootElement.getElementsByTagName("svg")[0],$config=$(rootElement).find(".tile-config"),grid=new Grid(svgRootElement,188,new Point(36,36)),activeElement=null;$(".colors li").click(function(t){var e=$(this).data("hex");activeElement.fill(e)}),$("#tile-delete-btn").click(function(t){activeElement.clear()});var isTilt=!1;$("#3d").click(function(t){var e=$(".tile-grid");isTilt=isTilt?(e.tilt.destroy.call(e),!1):(e.tilt({reset:!1}),!0)}),$("#relaxed").click(function(t){$(svgRootElement).toggleClass("tiles--relaxed")}),$("#orientation").click(function(t){grid.orientation=grid.orientation===Orientation.pointy?Orientation.flat:Orientation.pointy,grid.update()});var Tile=function(){function i(t,e){_classCallCheck(this,i),this.hex=t,this.grid=e,this.element=null,this.center=null,this.points=[],this.color=null,this._init()}return _createClass(i,[{key:"_init",value:function(){var t=i.createElement();this.update(),this.element=this.grid.svg.getElementsByClassName("tiles")[0].appendChild(t),this.element.addEventListener("click",this.onClick.bind(this))}},{key:"update",value:function(){this.center=this.grid.hexToPixel(this.hex),this.points=this.grid.hexCorners(this.hex)}},{key:"draw",value:function(){var e=this;this.element.setAttribute("transform-origin","".concat(this.center.x,"px ").concat(this.center.y,"px")),this.element.childNodes.forEach(function(t){t.setAttribute("points",e.points)})}},{key:"fill",value:function(t){var e=$(this.element),i=e.find(".tile-shape");e.removeClass("tile--clear"),e.addClass("tile--fill"),i.attr("fill",t),i.attr("stroke",t),this.color=t}},{key:"clear",value:function(){var t=$(this.element);t.removeClass("tile--fill"),t.addClass("tile--clear"),this.color=null}},{key:"onClick",value:function(t){if((activeElement=this).color)$config.css({top:"".concat(this.center.y,"px"),left:"".concat(this.center.x,"px")}).fadeIn();else{this.fill("#222");for(var e=0;e<6;e++)this.grid.drawNeighbors(this)}this.grid.touch()}}]),i}();Tile.createElement=function(){var t="http://www.w3.org/2000/svg",e=document.createElementNS(t,"g"),i=document.createElementNS(t,"polygon"),n=document.createElementNS(t,"polygon");return e.setAttribute("class","tile tile--clear"),e.appendChild(i),e.appendChild(n),i.setAttribute("class","tile-shape"),n.setAttribute("class","tile-img"),e},grid.addTile([new Tile(new Hex(0,0),grid)]),grid.draw();
//# sourceMappingURL=app.min.js.map
